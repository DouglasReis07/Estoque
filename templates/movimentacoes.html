<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movimentações - Controle de Estoque</title>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <i class="bi bi-box-seam"></i>
            <span class="link-text logo-text">Meu Estoque</span>
        </div>
        <ul class="sidebar-links">
            <li><a href="{{ url_for('dashboard') }}"><i class="bi bi-speedometer2"> </i> <span class="link-text"> Dashboard </span></a></li>
            <li><a href="{{ url_for('estoque_page') }}"> <i class="bi bi-box-seam"></i><span class="link-text" > Estoque </span></a></li>
            <li><a href="{{ url_for('movimentacoes_page') }}"> <i class="bi bi-arrow-left-right"> </i><span class="link-text"> Movimentações </span></a></li>
        </ul>
        <div class="sidebar-footer">
            <div class="user-menu" id="user-menu">
                <div class="user-info" id="user-menu-trigger">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <i class="bi bi-person-circle"></i>
                        <span class="link-text">{{ current_user.nome }}</span>
                    </div>
                    <i class="bi bi-chevron-up user-menu-arrow link-text"></i>
                </div>
                <div class="user-dropdown" id="user-dropdown-menu">
                    <ul>
                        <li>
                            <span style="display: flex; align-items: center; gap: 0.5rem;">
                                <i class="bi bi-moon-stars-fill"></i> Modo Escuro
                            </span>
                            <div class="dark-mode-toggle">
                                <input type="checkbox" id="dark-mode-checkbox">
                                <label for="dark-mode-checkbox"></label>
                            </div>
                        </li>
                        <li>
                            <a href="{{ url_for('logout') }}">
                                <i class="bi bi-box-arrow-right"></i>
                                Sair
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <header class="page-header">
        <h2><i class="bi bi-arrow-left-right"></i> Histórico de Movimentações</h2>
    </header>

    <div class="content-wrapper">
        <main>
            <section class="mb-4">
                <h4><i class="bi bi-funnel"></i> Filtro por mês</h4>
                <div class="row g-3">
                    <div class="col-md-3">
                        <label class="form-label">Mês</label>
                        <select id="filtro-mes" class="form-select">
                            </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Ano</label>
                         <select id="filtro-ano" class="form-select">
                            </select>
                    </div>
                </div>
            </section>

            <section class="mb-4">
                <div class="row text-center gy-4" id="cards-resumo">
                    <div class="col-md-4">
                        <div class="card shadow summary-card entradas">
                            <div class="card-body">
                                <h5>Total Entradas</h5>
                                <h3 id="mov-card-total-entradas">0</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card shadow summary-card saidas">
                            <div class="card-body">
                                <h5>Total Saídas</h5>
                                <h3 id="mov-card-total-saidas">0</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card shadow summary-card gastos">
                            <div class="card-body">
                                <h5>Total Gastos</h5>
                                <h3 id="mov-card-total-gastos">R$ 0,00</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section>
                <h3 class="titulo-secao"><i class="bi bi-clock-history"></i> Detalhes</h3>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered" id="tabela-movimentacoes">
                        <thead class="table-dark">
                            <tr>
                                <th>Data</th>
                                <th>Produto</th>
                                <th>Tipo</th>
                                <th>Quantidade</th>
                                <th>Valor</th>
                                <th>Descrição</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </section>
        </main>
        
        <footer>
            <p><i class="bi bi-box-seam"></i> GARRY PRO - Sistema de Controle de Estoque &copy; 2025</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>